{% sw_extends '@Storefront/storefront/layout/header/top-bar.html.twig' %}

{% block layout_header_top_bar %}
    {# nav header classes array #}
    {% set visibleClasses = [] %}
    {% if topBarStyle is not same as ('offcanvas') %}
        {% set visibleClasses = ['d-none d-lg-flex']|merge(visibleClasses)  %}
    {% endif %}

    <div class="top-bar{% if config('zenitPlatformGravity.config.marketingActive') is not same as (true) %} {{ visibleClasses|join(' ') }}{% endif %}">
        <div class="container">
            {% block layout_header_top_bar_inner %}
                <nav class="top-bar-nav">
                    {% block zen_layout_header_top_bar_login_register %}
                        {% if topBarStyle is not same as ('offcanvas') and theme_config('zen-header-style') is not same as ('two-line')%}
                            {% sw_include '@zenitPlatformGravity/storefront/component/zen-login-register.html.twig' with {
                                visibleClasses: visibleClasses
                            } %}
                        {% endif %}
                    {% endblock %}

                    {% block zen_layout_header_top_bar_marketing %}
                        {% if topBarStyle is not same as ('offcanvas') and config('zenitPlatformGravity.config.marketingActive') %}
                            <div class="top-bar-nav-item top-bar-marketing">
                                {% sw_include '@zenitPlatformGravity/storefront/component/zen-text-slider.html.twig' with {
                                    active: config('zenitPlatformGravity.config.marketingActive'),
                                    text: config('zenitPlatformGravity.config.marketingText'),
                                    buttonText: config('zenitPlatformGravity.config.marketingButtonText'),
                                    buttonLink: config('zenitPlatformGravity.config.marketingButtonLink'),
                                    buttonTarget: config('zenitPlatformGravity.config.marketingButtonTarget')
                                } %}
                            </div>
                        {% endif %}
                    {% endblock %}

                    {% if theme_config('zen-header-style') is not same as ('two-line') or (theme_config('zen-header-style') is same as ('two-line') and topBarStyle is same as ('offcanvas')) %}
                        <div class="top-bar-nav-item top-bar-navigation-group {{ visibleClasses|join(' ') }}">
                            {% if page.header.languages.count > 1 or page.header.currencies.count > 1 or not feature('ACCESSIBILITY_TWEAKS') %}
                                {% block layout_header_top_bar_language %}
                                    {% sw_include '@Storefront/storefront/layout/header/actions/language-widget.html.twig' %}
                                {% endblock %}

                                {% block layout_header_top_bar_currency %}
                                    {% sw_include '@Storefront/storefront/layout/header/actions/currency-widget.html.twig' %}
                                {% endblock %}
                            {% endif %}

                            {% block layout_header_top_bar_service %}
                                {# ... @zenit - fallbacks for older child-themes without these configs #}
                                {% set topBarServiceNavigation = (theme_config('zen-top-bar-service-navigation') is not null) ? theme_config('zen-top-bar-service-navigation') : true %}

                                {% if topBarServiceNavigation %}
                                    {% sw_include '@zenitPlatformGravity/storefront/layout/header/actions/zen-service-menu-widget.html.twig' %}
                                {% endif %}
                            {% endblock %}

                            {% block zen_layout_header_top_bar_close %}
                                {% if topBarStyle is same as ('expandable') or topBarStyle is same as ('collapsible') %}
                                    <button class="btn top-bar-nav-btn btn-close-top-bar"
                                            type="button"
                                            aria-label="{{ 'zentheme.general.closeTopBar'|trans|striptags }}"
                                            data-bs-toggle="collapse"
                                            data-bs-target="#topBarCollapse"
                                            aria-expanded="true"
                                            data-zen-collapse-top-bar-options="{{ collapseTopBarOptions|json_encode }}">
                                        {% block zen_layout_header_top_bar_close_icon %}
                                            {% sw_icon 'x' style { size: 'sm' } %}
                                        {% endblock %}
                                    </button>
                                {% endif %}
                            {% endblock %}
                        </div>
                    {% endif %}
                </nav>
            {% endblock %}
        </div>
    </div>
{% endblock %}
