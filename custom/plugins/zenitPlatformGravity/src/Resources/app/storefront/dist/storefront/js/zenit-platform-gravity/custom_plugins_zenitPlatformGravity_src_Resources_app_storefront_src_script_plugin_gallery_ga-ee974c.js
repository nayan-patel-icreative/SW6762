"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["custom_plugins_zenitPlatformGravity_src_Resources_app_storefront_src_script_plugin_gallery_ga-ee974c"],{278:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});var i=r(3266),s=r(4049),o=r(5206),n=r(9610),l=r(447);class a extends window.PluginBaseClass{init(){let e=this.options,t=s.Z.querySelector(this.el,e.zoomModalSelector,!1),r=s.Z.querySelector(this.el.parentElement,e.magnifierSelector,!1);r&&(this._magnifierPlugin=window.PluginManager.getPluginInstanceFromElement(r,"Magnifier")),t&&(this._zoomModalPlugin=window.PluginManager.getPluginInstanceFromElement(t,"ZoomModal")),this._gallerScroller=s.Z.querySelector(this.el,e.galleryScrollerSelector,!1),this._zoomModalTriggers=s.Z.querySelectorAll(this._gallerScroller,[e.triggerSelector,e.triggerSelectorCanvas],!1),this._gallerySliderItems=Array.from(s.Z.querySelectorAll(this.el,e.gallerySliderItemSelector,!1)),this._gallerySliderPlugin=window.PluginManager.getPluginInstanceFromElement(this.el,"GallerySlider"),this._currentSliderIndex=0,this._currentSliderOffsetTop=0,this._registerEvents()}_registerEvents(){this._onViewportHasChanged(),document.addEventListener("Viewport/hasChanged",this._onViewportHasChanged.bind(this)),this._magnifierPlugin&&this._magnifierPlugin.$emitter.subscribe("createZoomImage",this._onCreateMagnifierImage.bind(this)),this._zoomModalPlugin&&this._onZoomModalShowSubscriber(),this.$emitter.publish("registerEvents")}_onViewportHasChanged(){let e=this.options;this._isInAllowedViewports()?(this.el.classList.add(e.activeClass),this._registerGalleryScrollerEvents(),this._registerZoomModalTriggerEvents()):(this.el.classList.remove(e.activeClass),this._unregisterGalleryScrollerEvents(),this._unregisterZoomModalTriggerEvents()),this.$emitter.publish("onViewportHasChanged")}_registerZoomModalTriggerEvents(){let e=o.Z.isTouchDevice()?"touchstart":"mouseenter";this._unregisterZoomModalTriggerEvents(),i.Z.iterate(this._zoomModalTriggers,(t,r)=>{t.addEventListener(e,this._onHoverZoomModalTrigger.bind(this,r))}),this.$emitter.publish("registerZoomModalTriggerEvents")}_unregisterZoomModalTriggerEvents(){let e=o.Z.isTouchDevice()?"touchstart":"mouseenter";i.Z.iterate(this._zoomModalTriggers,t=>{t.removeEventListener(e,this._onHoverZoomModalTrigger.bind(this))}),this.$emitter.publish("unregisterZoomModalTriggerEvents")}_onHoverZoomModalTrigger(e){this._currentSliderIndex=e,this._gallerySliderPlugin._slider.goTo(this._currentSliderIndex),this._unregisterZoomModalTriggerEvents(),this.$emitter.publish("onClickZoomModal")}_registerGalleryScrollerEvents(){let e=this.options,t=o.Z.isTouchDevice()?"touchstart":"click";this.el.classList.add(e.activeClass),this._debounceOnScroll=n.Z.debounce(this._onScroll.bind(this),e.scrollDebounceTime),document.addEventListener("scroll",this._debounceOnScroll,!1),this._thumbnails=s.Z.querySelectorAll(this.el,e.thumbnailsSelector,!1),this._thumbnails&&i.Z.iterate(this._thumbnails,(e,r)=>{e.addEventListener(t,this._scrollToImg.bind(this,r))}),this.$emitter.publish("registerGalleryScrollerEvents")}_unregisterGalleryScrollerEvents(){let e=this.options;this.el.classList.remove(e.activeClass),document.removeEventListener("scroll",this._debounceOnScroll,!1),this.$emitter.publish("unregisterGalleryScrollerEvents")}_onScroll(){let e=this._gallerySliderItems.reduce((e,t)=>t.getBoundingClientRect().top+t.clientHeight/2<=0?e+1:e,0);this._currentSliderIndex=e,this._gallerySliderPlugin._slider.goTo(this._currentSliderIndex),i.Z.iterate(this._gallerySliderItems,(t,r)=>{e===r&&(this._currentSliderOffsetTop=t.offsetTop)})}_scrollToImg(e){let t=this.options,r=this._gallerySliderItems[e];this._currentSliderIndex=e;let i=s.Z.querySelector(document,t.stickyHeaderSelector,!1),o=i?i.offsetHeight:0;window.scrollTo({top:window.scrollY+r.getBoundingClientRect().top-o,behavior:"smooth"}),this.$emitter.publish("scrollToImg")}_onCreateMagnifierImage(){let e=this.options,t=s.Z.querySelector(this.el,e.magnifierOverGallerySelector,!1);t&&(t.style.top=this._currentSliderOffsetTop+"px")}_onZoomModalShowSubscriber(){this._zoomModalPlugin.$emitter.subscribe("initSlider",this._onZoomModalShow.bind(this))}_onZoomModalShow(e){let t=this.options;if("modal"in e.detail){let e=s.Z.querySelector(this.el,t.zoomModalGallerySliderSelector,!1);this._zoomGallerySliderPlugin=window.PluginManager.getPluginInstanceFromElement(e,"GallerySlider"),this._zoomGallerySliderPlugin._slider.goTo(this._currentSliderIndex)}this.$emitter.publish("onZoomModalShow")}_isInAllowedViewports(){return l.Z.isLG()||l.Z.isXL()||l.Z.isXXL()}}a.options={activeClass:"js-gallery-scroller",galleryScrollerSelector:".gallery-scroller",gallerySliderItemSelector:".gallery-scroller .gallery-slider-item",thumbnailsSelector:".gallery-slider-thumbnails-container .gallery-slider-thumbnails-item",zoomModalSelector:"[data-zoom-modal]",triggerSelector:"img",triggerSelectorCanvas:"canvas",zoomModalGallerySliderSelector:"[data-modal-gallery-slider]",magnifierSelector:"[data-magnifier]",magnifierOverGallerySelector:".gallery-slider .magnifier-zoom-image",stickyHeaderSelector:".header-main[data-zen-sticky-header]",scrollDebounceTime:100}},9610:(e,t,r)=>{r.d(t,{Z:()=>i});class i{static debounce(e,t){let r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){for(var s=arguments.length,o=Array(s),n=0;n<s;n++)o[n]=arguments[n];i&&!r&&setTimeout(e.bind(e,...o),0),clearTimeout(r),r=setTimeout(e.bind(e,...o),t)}}}},5206:(e,t,r)=>{r.d(t,{Z:()=>i});class i{static isTouchDevice(){return"ontouchstart"in document.documentElement}static isIOSDevice(){return i.isIPhoneDevice()||i.isIPadDevice()}static isNativeWindowsBrowser(){return i.isIEBrowser()||i.isEdgeBrowser()}static isIPhoneDevice(){return!!navigator.userAgent.match(/iPhone/i)}static isIPadDevice(){return!!navigator.userAgent.match(/iPad/i)}static isIEBrowser(){return -1!==navigator.userAgent.toLowerCase().indexOf("msie")||!!navigator.userAgent.match(/Trident.*rv:\d+\./)}static isEdgeBrowser(){return!!navigator.userAgent.match(/Edge\/\d+/i)}static getList(){return{"is-touch":i.isTouchDevice(),"is-ios":i.isIOSDevice(),"is-native-windows":i.isNativeWindowsBrowser(),"is-iphone":i.isIPhoneDevice(),"is-ipad":i.isIPadDevice(),"is-ie":i.isIEBrowser(),"is-edge":i.isEdgeBrowser()}}}},4049:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(5140);class s{static isNode(e){return"object"==typeof e&&null!==e&&(e===document||e===window||e instanceof Node)}static hasAttribute(e,t){if(!s.isNode(e))throw Error("The element must be a valid HTML Node!");return"function"==typeof e.hasAttribute&&e.hasAttribute(t)}static getAttribute(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(r&&!1===s.hasAttribute(e,t))throw Error('The required property "'.concat(t,'" does not exist!'));if("function"!=typeof e.getAttribute){if(r)throw Error("This node doesn't support the getAttribute function!");return}return e.getAttribute(t)}static getDataAttribute(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],o=t.replace(/^data(|-)/,""),n=i.Z.toLowerCamelCase(o,"-");if(!s.isNode(e)){if(r)throw Error("The passed node is not a valid HTML Node!");return}if(void 0===e.dataset){if(r)throw Error("This node doesn't support the dataset attribute!");return}let l=e.dataset[n];if(void 0===l){if(r)throw Error('The required data attribute "'.concat(t,'" does not exist on ').concat(e,"!"));return l}return i.Z.parsePrimitive(l)}static querySelector(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(r&&!s.isNode(e))throw Error("The parent node is not a valid HTML Node!");let i=e.querySelector(t)||!1;if(r&&!1===i)throw Error('The required element "'.concat(t,'" does not exist in parent node!'));return i}static querySelectorAll(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(r&&!s.isNode(e))throw Error("The parent node is not a valid HTML Node!");let i=e.querySelectorAll(t);if(0===i.length&&(i=!1),r&&!1===i)throw Error('At least one item of "'.concat(t,'" must exist in parent node!'));return i}}},3266:(e,t,r)=>{r.d(t,{Z:()=>i});class i{static iterate(e,t){if(e instanceof Map||Array.isArray(e))return e.forEach(t);if(e instanceof FormData){for(var r of e.entries())t(r[1],r[0]);return}if(e instanceof NodeList)return e.forEach(t);if(e instanceof HTMLCollection)return Array.from(e).forEach(t);if(e instanceof Object)return Object.keys(e).forEach(r=>{t(e[r],r)});throw Error("The element type ".concat(typeof e," is not iterable!"))}}},5140:(e,t,r)=>{r.d(t,{Z:()=>i});class i{static ucFirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}static lcFirst(e){return e.charAt(0).toLowerCase()+e.slice(1)}static toDashCase(e){return e.replace(/([A-Z])/g,"-$1").replace(/^-/,"").toLowerCase()}static toLowerCamelCase(e,t){let r=i.toUpperCamelCase(e,t);return i.lcFirst(r)}static toUpperCamelCase(e,t){return t?e.split(t).map(e=>i.ucFirst(e.toLowerCase())).join(""):i.ucFirst(e.toLowerCase())}static parsePrimitive(e){try{return/^\d+(.|,)\d+$/.test(e)&&(e=e.replace(",",".")),JSON.parse(e)}catch(t){return e.toString()}}}},447:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(9610);class s{_registerEvents(){window.addEventListener("DOMContentLoaded",this._onDOMContentLoaded.bind(this)),window.addEventListener("resize",i.Z.debounce(this._onResize.bind(this),200),{capture:!0,passive:!0})}_onDOMContentLoaded(){this._dispatchEvents()}_onResize(){this._viewportHasChanged(s.getCurrentViewport())&&(this._dispatchEvents(),this._dispatchViewportEvent("Viewport/hasChanged"))}_dispatchEvents(){s.isXS()?this._dispatchViewportEvent("Viewport/isXS"):s.isSM()?this._dispatchViewportEvent("Viewport/isSM"):s.isMD()?this._dispatchViewportEvent("Viewport/isMD"):s.isLG()?this._dispatchViewportEvent("Viewport/isLG"):s.isXL()?this._dispatchViewportEvent("Viewport/isXL"):s.isXXL()&&this._dispatchViewportEvent("Viewport/isXXL")}_viewportHasChanged(e){let t=e!==this.currentViewport;return t&&(this.previousViewport=this.currentViewport,this.currentViewport=e),t}_dispatchViewportEvent(e){document.$emitter.publish(e,{previousViewport:this.previousViewport})}static isXS(){return"XS"===s.getCurrentViewport()}static isSM(){return"SM"===s.getCurrentViewport()}static isMD(){return"MD"===s.getCurrentViewport()}static isLG(){return"LG"===s.getCurrentViewport()}static isXL(){return"XL"===s.getCurrentViewport()}static isXXL(){return"XXL"===s.getCurrentViewport()}static getCurrentViewport(){return window.getComputedStyle(document.documentElement).getPropertyValue("--sw-current-breakpoint").replace(/['"]+/g,"").toUpperCase()}constructor(){this.previousViewport=null,this.currentViewport=s.getCurrentViewport(),this._registerEvents()}}}}]);